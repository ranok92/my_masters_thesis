\section{Various classical methods}

\subsection*{Outline structure of the chapter}
\begin{enumerate}
    \item Describe the problem of navigation.
    \item Describe the problem of social navigation and what how is it different from the problem of classical navigation.

    \item What are the factors that make this problem hard to pin and thus hard to solve? Include works from the paper "Influence of proxemic behaviours in human-robot interaction. (Takayama et al)
    \item Set of works done before and how they try to approach the problem.
\end{enumerate}

\subsection*{Papers to inculde}
    \begin{enumerate}
        \item Social forces model and its family (Reif and wang, helbing and Molnar).
        \item Qualitative trajectory calculus
        \item A framework towards a socially aware mobile robot motion in human ventered dynamic environment. - Pandey et al
        \item Dynamic window approach for reactive collision avoidance.
        \item Human aware mobile robot motion planner - Sisbot
        \item Trajectory planning for robots in dynamic human environments. Svenstrup
    \end{enumerate}



In this chapter we will go through some of the classical methods/ model-based approaches that has been taken to tackle the problem of social navigation. We will start by briefly introducing some methods for tackling the problem of navigation and their limitations to accomplishing the task of social navigation and what measures were subsequently taken up to address it.
\subsubsection*{Khatib et al}
In their work, Khatib et. al. introduce a path planner which they call artificial potential fields. The main idea behind the method is that the agent is moving through a place/field? where the goal exerts as an attractive force and the obstacle surfaces produces negative forces. The formulation of these forces are based on the distances between the agent and the goal/obstacle. The resulting controller, with proper hyperparameters does a fairly good job of navigating a scene and checking all the boxes of a good navigating agent. It reaches the goal and avoids the obstacles in the path to doing so. That being said, there were many drawbacks to this method, the most famous being getting stuck in a local minima, which were addressed by more sophisticated methods like probabilistic road-map based approaches (RRT Lavalle)
\subsubsection*{Helbing and Molnar: Social Forces}

Building on artificial potential fields, Helbing and Molnar in their work, Social force model for pedestrian dynamics. They introduce a way to model pedestrian behavior which works in a similar underlying principle as the 'potential fields' but varying the way the potential is calculated and is designed to encapsulate a richer set of information to imbibe 'social' behavior in the agent's movement.\\

Rather than representing the force applied to an agent as the sum of the forces from external factors (obstacles and goal(s)), they model the pedestrian behavior as a combination of a set of internal motivations.\\

The final formulation is given by:
\begin{align}
\frac{d\vec{w_{\alpha}}}{dt}:=\vec{F_{\alpha}}(t)+fluctuations
\end{align}

where the first term of the equation is further expanded as:\\

\begin{multline}
\vec{F_{\alpha}}(t):=
\vec{F_{\alpha}^{0}}(\vec{v_{\alpha}}, v_{\alpha}^{0}\vec{e_{\alpha}})+\sum_{\beta}\vec{F_{\alpha, \beta}}(\vec{e_{\alpha}}, \vec{r_{\alpha}} - \vec{r_{\beta}})
+\\\sum_{B}\vec{F_{\alpha\beta}}(\vec{e_{\alpha}}, \vec{r_{\alpha}} - \vec{r_{B}^{\alpha}}) + \sum_{i}\vec{F_{\alpha i}}(\vec{e_{\alpha}}, \vec{r_{\alpha}}-\vec{r_i},t)
\end{multline}

Each of the terms being added up in equation 9 is a mathematical formulation of an internal motivation.
The first term is the motivation to reach the goal.
The second and third term denotes the motivation to maintain a certain distance from other pedestrians and boundaries respectively.
The final term represents attractive forces other than the goal, that might attract a pedestrian like a street artist or a window of a shop.
The intricate modeling leads to the creation of quite convincing pedestrian models. 
\par
\textbf{Conclusion:}\\
A lot of careful engineering has been put into creating this 'formulae' that dictate/emulate the naturalness of human-movement while negotiating crowded space in an artificial agent/robot. 
Formulations of this nature are highly dependent on the different cases being considered and assumptions being made in the creation of the model. 
\subsubsection*{Sisbot et al}
Looking into more recent work in the field of navigation,
Sisbot et. al. in their work 'A human aware mobile robot motion planner', present a more sophisticated and meticulously constructed path planner. Similar to the work of potential fields (Khatib et al) and the social forces model (Molnar et al), the planner plans a path with the least cost ('cost' is analogous to 'forces/potential'). But the process of generating the cost map is different.\\
The authors generate and make use of three cost maps, primarily, $Cost_{safety}$, $Cost_{visibility}$ and an additional $Cost_{hidden zone}$.
The $Cost_{safety}$ keeps track of how safe a location in the grid is based on the structure and kinematics of the human and his/her state, where the state includes information like the posture (sitting or standing), configuration and parameters.\\
The $Cost_{visbility}$ assigns a cost proportional to the ease of visibility of the robot to a person in a given location. The rationale being, the effort a human has to make to keep the robot in his/her vision is directly proportional to the discomfort caused by the robot with its movements.\\
And lastly, it also takes into account the times when the robot remains hidden behind an obstacle and the accompanying cost with the term $Cost_{hidden zone}$. 
The authors also provide two slightly nuanced ways of merging the two primary costs. One where the $Cost_{merged}$ is the weighted sum of two
\begin{align}
Cost_{merged}(x,y) = w_{1}Cost{safety}(x,y) + w_{2}Cost_{visibility}(x,y)
\end{align}
and 
\begin{align}
Cost_{merged}(x,y) = max(Cost{safety}(x,y), Cost_{visibility}(x,y))
\end{align}

The final cost function factoring in the $Cost_{hidden zone}$ is
\begin{align}
Cost_{final}(x,y) \leftarrow w3 Cost_{hidden zone}(x,y)
\end{align}
when, x and y are in the field of view of a human but is obstructed by the presence of the robot and 
\begin{align}
Cost_{final}(x,y) \leftarrow Cost_{merged}(x,y)
\end{align}
Once the final cost grid is obtained, a path between two points on the grid is computed using $A^*$ search.

\subsubsection*{Svenstrup et al}
Finally, we look into another body of work by Svenstrup et al, that combines a potential field-like cost map with a probabilistic road map. The probabilistic road map is a class of planning algorithms where a robot navigates from a starting point to a goal point by creating a graph in a given space. The graph is constructed by generating random samples and trying to connect them to the existing graph.\\
In their work, Trajectory planning for robots in dynamic human environment, SvenStrup et al takes on the problem of autonomous navigation in a social environment in a different approach. They use the concept of 'forces' guiding the agent towards a goal, but they layer it with the use of a rapidly exploring random tree and also take into account the robot kino-dynamics while planning future trajectory.
Calculating the potential field:
The calculation of the PF involves three different terms:
Absolute cost the robot would get. I.e. a cost that does not depend on the obstacles.	
The cost associated with the goal.
The cost associated with the humans present in the vicinity.
The final cost is given by equation 4.
Description of each of the cost terms:
Cost concerning the environment :
Non-agoraphobic behavior,  i.e. the agent is motivated not to be in the edges of the environment. Provided by equation 5.
Cost of proximity to humans:
The pf calculation is based on their previous work, "Pose Estimation and Adaptive Robot Behavior for Human-Robot Interaction", where they construct the potential field by fine-tuning the co-variances of four Gaussian distributions expressing the following information: attraction towards a human, preventing the robot to approach a human from behind and two distributions to account for the parallel and perpendicular direction to the Person Interest indicator, which is calculated based on the person's velocity, position and pose.  

Equation - 6
Figure depicting the PF around a pedestrian.

Cost of heading towards the goal:
Motivates the agent to move towards the goal at each instant by providing a  negative reward for each move that deviates the agent from the shortest path to the goal. The induced penalty is represented in the form of an exponential function as shown below:
Equation - 7

The minimization problem:

RRT based trajectory planning:
The trajectory planner is based on a standard RRT planner with some key modifications. The introduce a step to prune the nodes that helps in reducing the size of the tree. They also modify the stopping condition for extending the tree. Instead of depending on an error, they place a limit on the number of nodes that can be added to the tree and terminate according to that. Finally, the trajectories with a smaller penalty are preferred over trajectories with newer vertices.

The overall algorithm:

The trend here is obvious: take a vanilla planning algorithm and modify it using information from proxemic studies or other human considerations.

General Conclusion:
Most of these methods share are similar to the original potential field idea, the place they vary is that instead of using the more mechanical gravitational potentials as introduced by khatib, they use something which better encapsulates the nature of the human movement.
In one sentence "they are good at what they do, but what they do is not good enough."

Path planning methods have been around for quite some time now and 


